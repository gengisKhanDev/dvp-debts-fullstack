<section class="space-y-4">
	<div class="flex items-center justify-between">
		<a routerLink="/debts" class="text-sm underline opacity-80">← Volver</a>
		<button class="text-sm rounded-xl border border-white/10 px-3 py-1 hover:bg-white/5" type="button"
			(click)="reload()">
			Recargar
		</button>
		@if (id$ | async; as id) {
		<a class="rounded-xl border border-white/10 px-4 py-2 hover:bg-white/5 text-sm"
			[routerLink]="['/debts', id, 'edit']">
			Editar
		</a>
		}
	</div>

	@if (actionError) {
	<div class="rounded-2xl border border-red-500/30 bg-red-500/10 p-4 text-sm">
		{{ actionError }}
	</div>
	}

	@if (vm$ | async; as vm) {
	@if (vm.loading) {
	<div class="rounded-2xl border border-white/10 p-4 space-y-3">
		<ui-skeleton [width]="220" [height]="18" />
		<ui-skeleton [width]="140" [height]="14" />
		<div class="pt-2 space-y-2">
			<ui-skeleton [width]="320" />
			<ui-skeleton [width]="260" />
		</div>
		<div class="flex gap-2 pt-2">
			<ui-skeleton [width]="110" [height]="34" />
			<ui-skeleton [width]="110" [height]="34" />
		</div>
	</div>
	} @else {
	@if (vm.error) {
	<div class="rounded-2xl border border-red-500/30 bg-red-500/10 p-4 text-sm">
		{{ vm.error }}
	</div>
	} @else {
	<div class="rounded-2xl border border-white/10 p-4">
		<div class="flex items-start justify-between gap-4">
			<div>
				<h1 class="text-xl font-semibold">Deuda #{{ vm.debt!.id }}</h1>
				<p class="mt-1 text-sm opacity-80">Estado: {{ vm.debt!.status }}</p>
			</div>

			<div class="text-right">
				<div class="text-sm opacity-70">Monto</div>
				<div class="text-lg font-semibold">${{ vm.debt!.amount }}</div>
			</div>
		</div>

		@if (vm.debt!.description) {
		<p class="mt-4 text-sm opacity-80">{{ vm.debt!.description }}</p>
		}

		<div class="mt-6 flex gap-2">
			@if (vm.debt!.status === 'PENDING') {
			<button class="rounded-xl bg-white/10 px-4 py-2 hover:bg-white/15 disabled:opacity-50" type="button"
				[disabled]="action !== null" (click)="pay()">
				@if (action === 'pay') { Pagando... } @else { Marcar pagada }
			</button>

			<button class="rounded-xl border border-white/10 px-4 py-2 hover:bg-white/5 disabled:opacity-50"
				type="button" [disabled]="action !== null" (click)="remove()">
				@if (action === 'delete') { Eliminando... } @else { Eliminar }
			</button>
			} @else {
			<div class="rounded-xl border border-white/10 px-4 py-2 text-sm opacity-80">
				Esta deuda está pagada ✅
			</div>
			}
		</div>
	</div>
	}
	}
	}
</section>