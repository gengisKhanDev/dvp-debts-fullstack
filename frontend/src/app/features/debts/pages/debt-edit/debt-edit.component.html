<section class="space-y-4">
	<div class="flex items-center justify-between">
		<a routerLink="/debts" class="text-sm underline opacity-80">← Volver</a>
	</div>

	<h1 class="text-xl font-semibold">Editar deuda</h1>

	@if (saveError) {
	<div class="rounded-2xl border border-red-500/30 bg-red-500/10 p-4 text-sm">
		{{ saveError }}
	</div>
	}

	@if (vm$ | async; as vm) {
	@if (vm.loading) {
	<div class="rounded-2xl border border-white/10 p-4 space-y-3">
		<ui-skeleton [width]="220" [height]="18" />
		<ui-skeleton [width]="320" />
		<ui-skeleton [width]="260" />
		<div class="flex gap-2 pt-2">
			<ui-skeleton [width]="110" [height]="34" />
			<ui-skeleton [width]="110" [height]="34" />
		</div>
	</div>
	} @else {
	@if (vm.error) {
	<div class="rounded-2xl border border-red-500/30 bg-red-500/10 p-4 text-sm">
		{{ vm.error }}
	</div>
	} @else {
	@if (!vm.debt) {
	<div class="rounded-2xl border border-white/10 p-4 opacity-80">
		No se encontró la deuda.
	</div>
	} @else {

	@if (vm.debt.status === 'PAID') {
	<div class="rounded-2xl border border-white/10 p-4 text-sm opacity-80">
		Esta deuda ya está pagada ✅ (no se puede modificar)
	</div>
	}

	<form class="space-y-4 rounded-2xl border border-white/10 p-4" [formGroup]="form"
		(ngSubmit)="submit(vm.id, vm.debt)">
		<div class="space-y-1">
			<label class="text-sm opacity-80">Nombre del acreedor</label>
			<input class="w-full rounded-xl border border-white/10 bg-transparent p-2 outline-none"
				formControlName="creditorName" />
		</div>

		<div class="space-y-1">
			<label class="text-sm opacity-80">Email del acreedor</label>
			<input class="w-full rounded-xl border border-white/10 bg-transparent p-2 outline-none" type="email"
				formControlName="creditorEmail" />
		</div>

		<div class="space-y-1">
			<label class="text-sm opacity-80">Teléfono del acreedor</label>
			<input class="w-full rounded-xl border border-white/10 bg-transparent p-2 outline-none"
				formControlName="creditorPhone" />
		</div>

		<div class="space-y-1">
			<label class="text-sm opacity-80">Monto</label>
			<input class="w-full rounded-xl border border-white/10 bg-transparent p-2 outline-none" type="number"
				min="0.01" step="0.01" formControlName="amount" />
		</div>

		<div class="space-y-1">
			<label class="text-sm opacity-80">Descripción</label>
			<textarea class="w-full rounded-xl border border-white/10 bg-transparent p-2 outline-none" rows="3"
				formControlName="description"></textarea>
		</div>

		<button class="rounded-xl bg-white/10 px-4 py-2 hover:bg-white/15 disabled:opacity-50"
			[disabled]="saving || vm.debt.status === 'PAID' || form.invalid" type="submit">
			@if (saving) { Guardando... } @else { Guardar cambios }
		</button>
	</form>
	}
	}
	}
	}
</section>